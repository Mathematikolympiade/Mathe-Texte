<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

<!--  XSchema $Id: Schema.xsd,v 1.1 2004/03/28 16:41:19 graebe Exp $  -->

<!-- globale Typdefinitionen -->

  <xs:simpleType name="ISBNPattern">
    <xs:restriction base="xs:token">
      <xs:pattern value="[\d-]+[\dX]"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="xs:lang">
    <xs:restriction base="xs:token">
      <xs:pattern value="de|en|ru"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="RefPattern">
    <xs:restriction base="xs:token">
      <xs:pattern value="[\w-]+"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="Empty">
  <!-- Leeres Element, wird derzeit anders von XSchema nicht unterstuetzt --> 
    <xs:restriction base="xs:string">
      <xs:pattern value=""/>
    </xs:restriction>
  </xs:simpleType>

  <xs:complexType name="Ref">
    <xs:simpleContent>
      <xs:extension base="Empty">
	<xs:attribute name="ref" type="RefPattern" use="required"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>

  <xs:complexType name="RefAndNumber">
    <xs:simpleContent>
      <xs:extension base="Empty">
	<xs:attribute name="ref" type="RefPattern" use="required"/>
	<xs:attribute name="number" type="xs:token"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>

  <xs:complexType name="EditionType">
    <xs:sequence>
      <xs:element name="publisher" type="Ref" maxOccurs="2"/>
      <xs:element name="date" type="xs:gYear"/>      
        <!-- Fehlende Jahresangabe: 0000 -->
      <xs:element name="ISBN" type="ISBNPattern" minOccurs="0"/>
      <xs:element name="ISSN" type="ISBNPattern" minOccurs="0"/>
      <xs:element name="availability" type="xs:unsignedByte"/>
    </xs:sequence>
    <xs:attribute name="id" type="RefPattern" use="required"/>
  </xs:complexType>

<!-- globale Elementdefinitionen -->

  <xs:element name="Book">
    <xs:complexType>
      <xs:sequence>
	<xs:element name="title" type="xs:string"/>
	<xs:element name="subtitle" type="xs:string" minOccurs="0"/>
	<xs:element name="alias" type="xs:string" minOccurs="0"/>
	<xs:element name="author" type="Ref" 
	            minOccurs="0" maxOccurs="4"/>
	<xs:element name="series" minOccurs="0" type="RefAndNumber"/>
	<xs:element name="Edition" type="EditionType"/>
	<xs:element name="Keywords" type="xs:token"/> 
	<!-- kommaseparierte Sequenz -->
      </xs:sequence>
      <xs:attribute name="id" type="xs:anyURI" use="required"/>
      <xs:attribute name="lang" type="xs:lang"/>
    </xs:complexType>
  </xs:element>

  <xs:element name="Person" maxOccurs="unbounded">
    <xs:complexType>
      <xs:sequence>
	<xs:element name="name" type="xs:token"/>
	<xs:element name="alias" type="xs:token" 
		    minOccurs="0" maxOccurs="unbounded"/>
      </xs:sequence>
      <xs:attribute name="id" type="RefPattern" use="required"/>
    </xs:complexType>
  </xs:element>

  <xs:element name="People">
    <xs:complexType>
      <xs:sequence>
	<xs:element ref="Person" maxOccurs="unbounded"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>

  <xs:element name="Publisher" maxOccurs="unbounded">
    <xs:complexType>
      <xs:sequence>
	<xs:element name="name" type="xs:token"/>
	<xs:element name="alias" type="xs:token" minOccurs="0"/>
	<xs:element name="shortname" type="xs:token"/>
	<xs:element name="city" type="xs:token" maxOccurs="3"/>
	<xs:element name="country" type="xs:token"/>
      </xs:sequence>
      <xs:attribute name="id" type="RefPattern" use="required"/>
    </xs:complexType>
  </xs:element>

  <xs:element name="Publishers">
    <xs:complexType>
      <xs:sequence>
	<xs:element ref="Publisher" maxOccurs="unbounded"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>

  <xs:element name="Series" maxOccurs="unbounded">
    <xs:complexType>
      <xs:sequence>
	<xs:element name="name" type="xs:token"/>
	<xs:element name="publisher" type="Ref"/>
      </xs:sequence>
      <xs:attribute name="id" type="RefPattern" use="required"/>
    </xs:complexType>
  </xs:element>

  <xs:element name="Reihen">
    <xs:complexType>
      <xs:sequence>
	<xs:element ref="Series" maxOccurs="unbounded"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>

</xs:schema>
